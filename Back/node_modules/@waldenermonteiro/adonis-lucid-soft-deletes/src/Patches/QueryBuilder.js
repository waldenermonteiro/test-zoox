
const moment = require('moment')
module.exports = (queryBuilderInstance) => {
  queryBuilderInstance.delete = function ({ force = false } = {}) {
    this._applyScopes()

    if (this.Model.usesSoftDeletes && !force) {
      return this.query.update({
        deleted_at: this.Model.formatDates('deleted_at', moment().format('YYYY-MM-DD HH:mm:ss'))
      })
    }

    return this.query.delete()
  }

  return queryBuilderInstance
}
